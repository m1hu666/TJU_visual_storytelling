body {
            margin: 0;
            padding: 0;
            background-color: #e0e5ec;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow-x: hidden; /* Fix horizontal width */
            overflow-y: auto; /* Allow vertical scrolling if needed */
            width: 100%;
            height: auto; /* Allow body to expand with content */
        }

        .map-container {
            position: relative;
            width: 100%;   /* Fixed Width */
            height: auto;  /* Adaptive Height based on image aspect ratio */
            margin: 0;
            line-height: 0;
            display: block; 
        }

        .map-bg {
            width: 100%;  /* Fill container width */
            height: auto; /* Maintain aspect ratio */
            display: block;
            user-select: none;
            transition: transform 0.5s ease-in-out; 
        }

        .building-btn {
            position: absolute;
            height: auto; 
            cursor: pointer;
            z-index: 10;
            transform-origin: center bottom; 
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275), filter 0.3s;
            filter: drop-shadow(0 5px 5px rgba(0,0,0,0.2));
        }

        .building-btn:hover {
            z-index: 100;
            transform: scale(var(--hover-scale, 1.15)) translateY(var(--hover-translate, -10px));
            filter: drop-shadow(0 15px 20px rgba(0,0,0,0.4)) brightness(1.1);
        }

        .building-btn:active {
            transform: scale(0.95);
        }

        .overlay {
            position: absolute; /* Relative to .map-container */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: transparent; 
            z-index: 9999;
            display: none; 
            justify-content: center;
            align-items: center;
            pointer-events: none; 
        }

        .back-btn {
            /* Fixed relative to the map container */
            position: absolute;
            top: 37%; 
            right: 5%; 
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.5vw; 
            background: transparent; 
            border: none;
            border-radius: 0.5vw;
            cursor: pointer;
            box-shadow: none; 
            transition: background-color 0.15s, transform 0.15s;
            pointer-events: auto;
            z-index: 10003; 
        }

        .back-btn:hover {
            background-color: rgba(0,0,0,0.06); /* 轻微 hover 背景，保持低调 */
            transform: translateY(-0.2vw);
        }

        .back-icon {
            width: 4vw; /* 【调整这里】改变图标大小 */
            height: 4vw; /* 【调整这里】改变图标大小 */
            display: block;
            object-fit: contain;
        }

        .visually-hidden {
            position: absolute !important;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0 0 0 0);
            white-space: nowrap;
            border: 0;
        }

        /* 轮播图容器 */
        .detail-carousel {
            position: absolute; /* Relative to .map-container */
            bottom: 10%;
            left: 5%;
            width: 35%; /* Percentage width */
            z-index: 10000;
            display: none; /* 默认隐藏 */
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            border-radius: 8px;
            animation: slideUpFade 0.6s ease-out;
        }

        /* Building 32 单张详情图样式 (与轮播图位置一致) */
        .detail-single-img {
            position: absolute; /* Relative to .map-container */
            bottom: 11%;
            left: 5%;
            width: 35%; /* Percentage width */
            z-index: 10000;
            display: none; /* 默认隐藏 */
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            border-radius: 8px;
            animation: slideUpFade 0.6s ease-out;
            height: auto;
        }

        /* 轮播图片 */
        .carousel-img {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 8px;
            
            /* 绝对定位实现堆叠 */
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0;
            transition: opacity 1s ease-in-out; /* 淡入淡出效果 */
        }

        /* 激活状态的图片显示 */
        .carousel-img.active {
            position: relative; /* 第一张或者激活的图片占据文档流，撑开容器高度 */
            opacity: 1;
            z-index: 1;
        }
        
        /* 非激活但需要占据位置的图片（通常只需要一张 relative 即可，这里为了简单，JS控制 active 时切换 relative/absolute 可能会抖动。
           更好的方案是容器定高或由第一张撑开。
           这里采用方案：所有图片 absolute，容器用 padding-top 或 JS 动态设置高度，或者让第一张 relative 撑开。
           为了简单且稳健：让 active 的图片 relative，其他的 absolute。
        */
        
        /* 修正方案：所有图片 absolute，除了 active 的。
           但是切换时 active 变 absolute 会导致容器高度塌陷。
           
           改进方案：
           容器相对定位。
           第一张图片（或当前显示的图片）设为 relative 撑开高度？
           不，淡入淡出通常需要图片重叠。
           所以所有图片 absolute，容器需要指定高度或宽高比。
           或者：使用 grid 布局重叠。
        */
        
        .detail-carousel {
            display: grid; /* 使用 Grid 让图片重叠 */
            grid-template-areas: "stack";
            display: none; /* 默认隐藏，JS 控制显示为 grid */
        }

        .carousel-img {
            grid-area: stack;
            width: 100%;
            height: auto;
            opacity: 0;
            transition: opacity 1s ease-in-out;
            border-radius: 8px;
            position: relative; /* 恢复默认 */
        }

        .carousel-img.active {
            opacity: 1;
            z-index: 1;
        }

        .moto-container {
            position: absolute; /* Relative to .map-container */
            bottom: 0;
            left: 0;
            width: 100%;
            height: 65%; /* Percentage height relative to map height (100vh) */
            z-index: 900; 
            display: none;
            animation: fadeIn 0.8s ease-out;
        }

        .moto-img {
            width: 100%;
            height: 100%;
            object-fit: cover; 
            display: block;
        }

        .moto-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.8); 
        }

        /* =========================================
           新增样式：图书馆介绍卡片 (右侧悬浮)
           ========================================= */
        /* --- 核心卡片样式 --- */
        .library-info-card {
            /* 【定位】固定在屏幕右侧，垂直居中 */
            position: absolute; /* Relative to .map-container */
            right: 17%;  /* Percentage distance */
            top: 70%;
            transform: translateY(-50%); /* 结合 top:50% 实现精准垂直居中 */
            
            /* 【尺寸】 */
            width: 35%; /* Percentage width */
            max-width: none; 
            
            /* 【毛玻璃核心效果】 */
            /* 背景使用微弱的渐变，模拟光照感 */
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.65));
            backdrop-filter: blur(12px); /* 磨砂程度 */
            -webkit-backdrop-filter: blur(12px); /* 兼容 Safari */
            
            /* 【边框与圆角】 */
            border-radius: 4vw;
            /* 边框设置透明度，增加精致感 */
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-top-color: rgba(255, 255, 255, 0.7); /* 让顶部边框更亮 */
            
            /* 【阴影 - 制造悬浮感】 */
            box-shadow: 
                0 4px 6px -1px rgba(0, 0, 0, 0.05), /* 基础阴影 */
                0 10px 30px -5px rgba(31, 38, 135, 0.15); /* 扩散的氛围阴影 */
            
            /* 【排版与字体 - 全局】 */
            padding: 1.5vw;
            font-family: "PingFang SC", "Microsoft YaHei", -apple-system, BlinkMacSystemFont, sans-serif;
            font-size: 0.7vw;
            line-height: 1.75; /* 拉开行高，增加呼吸感 */
            color: #4a4a4a;    /* 深灰色正文，比纯黑更柔和 */
            letter-spacing: 0.5px;
            
            /* 【层级与显示】 */
            z-index: 10001;
            
            /* 注意：如果你想直接看到效果，请暂时把下面这行 display: none 注释掉 */
            display: none; 
            
            /* 【进场动画】 */
            animation: slideInRightFade 0.6s cubic-bezier(0.22, 1, 0.36, 1) forwards;
        }

        /* --- 标题样式 --- */
        .library-info-card h2 {
            margin: 0 0 0.7vw 0; /* 标题下方的间距 */
            
            /* 【字体调整】 */
            font-size: 1.5vw;   /* 既清晰又不会过大 */
            font-weight: 600;  /* 半粗体，更有质感 */
            color: #1a5f7a;    /* 深青蓝色，显得专业 */
            
            /* 【装饰线】 */
            border-bottom: 1px solid rgba(0, 0, 0, 0.08);
            padding-bottom: 0.6vw;
        }

        /* --- 动画定义 --- */
        @keyframes slideInRightFade {
            0% {
                opacity: 0;
                transform: translate(30px, -50%); /* 从右边稍微偏移一点的位置进入 */
                filter: blur(5px);
            }
            100% {
                opacity: 1;
                transform: translate(0, -50%); /* 回到原本位置 */
                filter: blur(0);
            }
        }

        .info-section {
            margin-bottom: 0.7vw;
        }

        .info-title {
            font-weight: bold;
            color: #2c3e50;
            display: block;
            margin-bottom: 0.2vw;
            font-size: 0.9vw;
        }

        .info-text {
            color: #555;
            margin: 0;
            text-align: justify;
        }

        /* 让图书馆信息卡片内的正文更醒目 */
        .library-info-card .info-text {
            font-weight: 600; /* 半粗体，增强可读性 */
        }

        /* 查看布局按钮 */
        .view-layout-btn {
            display: inline-block;
            margin-top: 0.4vw;
            padding: 0.25vw 0.6vw;
            font-size: 0.6vw;
            color: #fff;
            background-color: #1a5f7a;
            border: none;
            border-radius: 0.2vw;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .view-layout-btn:hover {
            background-color: #134b61;
        }

        /* 布局图片展示容器 */
        .layout-view-container {
            position: absolute; /* Relative to .map-container */
            right: 2%; /* Percentage distance */
            top: 70%;
            transform: translateY(-50%);
            width: 20%; /* Percentage width */
            max-width: none;
            background: rgba(255, 255, 255, 0.95);
            padding: 0.7vw;
            border-radius: 0.6vw;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            z-index: 10002; /* 比 info-card 高 */
            display: none; /* 默认隐藏 */
            flex-direction: column;
            align-items: center;
            animation: fadeIn 0.4s ease-out;
        }

        .layout-img {
            width: 100%;
            height: auto;
            border-radius: 0.4vw;
            margin-bottom: 0.5vw;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .layout-text {
            width: 100%;
            max-height: 30vw;
            overflow-y: auto;
            text-align: left;
            color: #333;
            font-size: 0.7vw;
            line-height: 1.6;
            margin-bottom: 0.5vw;
            padding-right: 0.25vw; /* 防止滚动条遮挡文字 */
        }
        .layout-text h3 {
            font-size: 0.8vw;
            color: #1a5f7a;
            margin-top: 0.7vw;
            margin-bottom: 0.4vw;
            border-left: 0.2vw solid #1a5f7a;
            padding-left: 0.4vw;
        }
        .layout-text p {
            margin-bottom: 0.5vw;
            text-indent: 2em;
            font-size: 0.6vw;
        }

        .close-layout-btn {
            padding: 0.4vw 1vw;
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 0.3vw;
            cursor: pointer;
            font-size: 0.6vw;
            transition: background-color 0.3s;
        }

        .close-layout-btn:hover {
            background-color: #c0392b;
        }

        /* 动画定义 */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUpFade {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideInRight {
            from { opacity: 0; transform: translateX(50px); }
            to { opacity: 1; transform: translateX(0); }
        }